{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///D:/Proyek%20PADSI/PADSI-KEOS/src/lib/db.ts"],"sourcesContent":["import { Pool } from \"pg\";\n\nlet pool: Pool | null = null;\n\nfunction getPool() {\n  if (!pool) {\n    pool = new Pool({\n      connectionString: process.env.DATABASE_URL,\n      ssl: {\n        rejectUnauthorized: false,\n      },\n    });\n  }\n  return pool;\n}\n\nexport async function query<T = any>(\n  text: string,\n  params?: any[]\n): Promise<{ rows: T[] }> {\n  const p = getPool();\n  const res = await p.query(text, params);\n  return res as any;\n}\n"],"names":[],"mappings":";;;;AAAA;;AAEA,IAAI,OAAoB;AAExB,SAAS;IACP,IAAI,CAAC,MAAM;QACT,OAAO,IAAI,qGAAI,CAAC;YACd,kBAAkB,QAAQ,GAAG,CAAC,YAAY;YAC1C,KAAK;gBACH,oBAAoB;YACtB;QACF;IACF;IACA,OAAO;AACT;AAEO,eAAe,MACpB,IAAY,EACZ,MAAc;IAEd,MAAM,IAAI;IACV,MAAM,MAAM,MAAM,EAAE,KAAK,CAAC,MAAM;IAChC,OAAO;AACT","debugId":null}},
    {"offset": {"line": 79, "column": 0}, "map": {"version":3,"sources":["file:///D:/Proyek%20PADSI/PADSI-KEOS/src/app/api/menus/%5Bid%5D/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\nimport { query } from \"@/lib/db\";\n\nconst expectsJson = (req: NextRequest) =>\n  req.headers.get(\"x-requested-with\") === \"fetch\";\n\nexport async function POST(\n  req: NextRequest,\n  props: { params: Promise<{ id: string }> }\n) {\n  await query(\n    \"ALTER TABLE menus ADD COLUMN IF NOT EXISTS rating INTEGER NOT NULL DEFAULT 4\"\n  );\n  const { id } = await props.params;\n  const formData = await req.formData();\n  const method = String(formData.get(\"_method\") || \"\").toUpperCase();\n\n  if (method === \"DELETE\") {\n    await query(\"DELETE FROM menus WHERE id = $1\", [id]);\n    if (expectsJson(req)) {\n      return NextResponse.json({ success: true });\n    }\n    return NextResponse.redirect(new URL(\"/menu\", req.url));\n  }\n\n  if (method === \"PUT\") {\n    const name = String(formData.get(\"name\") || \"\").trim();\n    const price = Number(formData.get(\"price\") || 0);\n    const image_url = (formData.get(\"image_url\") as string | null) || null;\n    const ratingRaw = formData.get(\"rating\");\n    let rating = ratingRaw ? Number(ratingRaw) : 4;\n    if (!Number.isFinite(rating) || rating < 1 || rating > 5) rating = 4;\n\n    await query(\n      \"UPDATE menus SET name = $1, price = $2, image_url = $3, rating = $4 WHERE id = $5\",\n      [name, price, image_url, rating, id]\n    );\n\n    if (expectsJson(req)) {\n      return NextResponse.json({ success: true });\n    }\n    return NextResponse.redirect(new URL(\"/menu\", req.url));\n  }\n\n  return NextResponse.json({ error: \"Metode tidak didukung\" }, { status: 400 });\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEA,MAAM,cAAc,CAAC,MACnB,IAAI,OAAO,CAAC,GAAG,CAAC,wBAAwB;AAEnC,eAAe,KACpB,GAAgB,EAChB,KAA0C;IAE1C,MAAM,IAAA,2HAAK,EACT;IAEF,MAAM,EAAE,EAAE,EAAE,GAAG,MAAM,MAAM,MAAM;IACjC,MAAM,WAAW,MAAM,IAAI,QAAQ;IACnC,MAAM,SAAS,OAAO,SAAS,GAAG,CAAC,cAAc,IAAI,WAAW;IAEhE,IAAI,WAAW,UAAU;QACvB,MAAM,IAAA,2HAAK,EAAC,mCAAmC;YAAC;SAAG;QACnD,IAAI,YAAY,MAAM;YACpB,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,SAAS;YAAK;QAC3C;QACA,OAAO,gJAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,SAAS,IAAI,GAAG;IACvD;IAEA,IAAI,WAAW,OAAO;QACpB,MAAM,OAAO,OAAO,SAAS,GAAG,CAAC,WAAW,IAAI,IAAI;QACpD,MAAM,QAAQ,OAAO,SAAS,GAAG,CAAC,YAAY;QAC9C,MAAM,YAAY,AAAC,SAAS,GAAG,CAAC,gBAAkC;QAClE,MAAM,YAAY,SAAS,GAAG,CAAC;QAC/B,IAAI,SAAS,YAAY,OAAO,aAAa;QAC7C,IAAI,CAAC,OAAO,QAAQ,CAAC,WAAW,SAAS,KAAK,SAAS,GAAG,SAAS;QAEnE,MAAM,IAAA,2HAAK,EACT,qFACA;YAAC;YAAM;YAAO;YAAW;YAAQ;SAAG;QAGtC,IAAI,YAAY,MAAM;YACpB,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,SAAS;YAAK;QAC3C;QACA,OAAO,gJAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,SAAS,IAAI,GAAG;IACvD;IAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;QAAE,OAAO;IAAwB,GAAG;QAAE,QAAQ;IAAI;AAC7E","debugId":null}}]
}